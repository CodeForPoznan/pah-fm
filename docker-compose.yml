version: "3.5"
services:

  frontend:
    container_name: pah-fm-frontend
    build: frontend
    depends_on:
      - backend
    links:
      - backend:backend
    ports:
      - 8080:8080
    environment:
      VUE_APP_API_URL: http://backend:8000/api/

  frontend-react:
    container_name: pah-fm-frontend-react
    build: frontend-react
    depends_on:
      - backend
    links:
      - backend:backend
    ports:
      - 8090:8090
    volumes:
      - ./frontend-react:/pah-fm/frontend-react
    environment:
      REACT_APP_BACKEND_URL: http://backend:8000/api/
      PORT: 8090

  backend:
    container_name: pah-fm-backend
    build: backend
    stdin_open: true
    tty: true
    links:
      - database:database
    ports:
      - 8000:8000
      - 4444:4444
    volumes:
      - ./backend:/pah-fm/backend
    environment:
      BASE_URL: localhost:8000
      PAH_FM_DB_HOST: database
      SECRET_KEY: pah-fm
      DEBUG: 1
      DJANGO_LOG_LEVEL: DEBUG

  database:
    container_name: pah-fm-database
    image: postgres:14.4
    ports:
      - 5432:5432
    environment:
      POSTGRES_DB: pah-fm
      POSTGRES_USER: pah-fm
      POSTGRES_PASSWORD: pah-fm
